# 鏡子迷宮推理遊戲 PRD

## 產品概述
這是一個基於光線反射原理的推理遊戲，玩家需要通過觀察光線的反射路徑來推斷鏡子的配置。

## 核心功能

### 1. 遊戲機制
- 3x3 的房間配置
- 每個房間可以放置 0-1 面鏡子
- 鏡子分為兩種：
  - 正斜鏡（／）：將光線從上方反射到左方，或從右方反射到下方
  - 反斜鏡（＼）：將光線從上方反射到右方，或從左方反射到下方
- 玩家從房間外觀察光線路徑：
  - 可以從任意門射入光線
  - 觀察光線的進入門和離開門
  - 記錄光線經過的鏡子數量（咚聲次數）
- 每次探索會記錄：
  - 進入的門
  - 咚聲次數（表示光線反射次數）
  - 離開的門

### 2. 猜測系統
- 玩家可以猜測每個房間的鏡子配置
- 猜測方式：
  - 點擊房間進行猜測
  - 使用按鈕切換鏡子類型（無鏡子、正斜鏡、反斜鏡）
- 提交猜測後會立即得到回饋
- 可以隨時清空猜測重新開始

### 3. 探索記錄
- 記錄所有探索和猜測歷史
- 包含以下類型的記錄：
  - 探索路徑（藍色邊框）
  - 重置操作（黃色邊框）
  - 錯誤猜測（紅色邊框）
  - 正確猜測（綠色邊框）
- 每條記錄包含：
  - 時間戳
  - 回合數
  - 詳細描述
- 支援正序/逆序顯示
- 使用上下箭頭圖示切換排序方向

### 4. 開發者模式
- 啟用方式：
  - 點擊標題五次
  - 點擊清空猜測按鈕五次
  - 使用快捷鍵 Ctrl+Shift+D
- 功能：
  - 顯示當前鏡子配置
  - 顯示初始鏡子配置
  - 即時更新顯示

## 使用者介面

### 1. 主遊戲區域
- 3x3 房間網格
- 房間外圍有 12 個門可供選擇
- 鏡子顯示使用 CSS 漸層效果
- 房間僅用於顯示，不可點擊

### 2. 猜測區域
- 3x3 房間網格
- 每個房間可點擊進行猜測
- 鏡子顯示使用 CSS 漸層效果

### 3. 控制面板
- 探索控制按鈕：
  - 開始探索按鈕
  - 重置鏡子配置按鈕
  - 重新開始遊戲按鈕
- 猜測控制按鈕：
  - 提交猜測按鈕
  - 清空猜測按鈕

### 4. 探索記錄面板
- 標題和排序切換按鈕（支援正序/逆序顯示）
- 可滾動的記錄列表
- 不同類型的記錄使用不同顏色邊框：
  - 藍色：探索路徑
  - 黃色：重置操作
  - 紅色：錯誤猜測
  - 綠色：正確猜測
- 每條記錄包含：
  - 時間戳
  - 回合數
  - 詳細描述

### 5. 開發者面板
- 當前配置顯示
- 初始配置顯示
- 即時更新
- 回合數統計
- 關閉按鈕

## 技術實現

### 1. 前端技術
- HTML5
- CSS3
- JavaScript (ES6+)
- Font Awesome 圖示庫

### 2. 主要功能模組
- 光線反射計算
- 鏡子配置管理
- 探索記錄系統
- 開發者模式控制

### 3. 資料結構
- 房間配置：3x3 陣列
- 探索記錄：時間戳、類型、描述
- 猜測狀態：當前猜測配置

## 未來規劃

### 一、遊戲機制與玩法
- 難度/複雜度自動判定（自動測試所有入口、計算咚聲數、分級）
- 支援自訂盤面大小（M x N）、自訂題目與分享
- 名詞統一、減少歧義（建立術語表、優化說明）
- 盤面與門的動態生成（門數、位置自適應）

### 二、使用者體驗與介面
- 探索盤與猜測盤設計一致（分格、視覺統一）
- 介面調整：外門由圓點改為箭頭、房間標號可選擇顯示
- 猜測盤可標記「確定無鏡」（紅色小叉叉）
- 多語言支援
- 成就系統、計時模式、教學模式
- 慢速播放光線路徑與鏡子變化動畫（可選）
- 按下外門後直接探索（待評估）

### 三、技術與維護
- 代碼模組化、性能優化、測試覆蓋
- 文檔完善、介面/名詞一致性維護 